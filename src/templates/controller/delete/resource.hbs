import { Logger } from '@agrippa-io/node-utils/src'
import * as mongoose from '@agrippa-io/node-mongoose/src'
import { UseCaseExecutor } from '@agrippa-io/node-mongoose/src/utils'
import express from 'express'
import MODEL from '../../constants/models'
import Mongoose{{ pascalCase model }}DeleteOne from '../../usecases/{{ pascalCase model }}/MongooseDeleteOne'
import InterfaceMongooseModel{{ pascalCase model }} from '../../models/{{ pascalCase model }}/document'


export default async (request : express.Request, response : express.Response) => {
  Logger.route('DELETE /v3/{{ snakeCase model }}s/:id')
  const { params: { id } } = request

  const filterQuery : mongoose.FilterQuery<InterfaceMongooseModel{{ pascalCase model }}> = { _id : id }

  const delete{{ pascalCase model }} = new Mongoose{{ pascalCase model }}DeleteOne({
    options: {},
    filterQuery
  })

  await delete{{ pascalCase model }}.perform()

  UseCaseExecutor.renderUseCase(delete{{ pascalCase model }}, request, response, {
    rootModel: MODEL.{{ constantCase model }}
  })
}
